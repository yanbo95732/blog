import{j as H,k as $,q as D,s as K,c as S,ae as Q,g as v,d as E,x as L,f as U,w as F,S as Ee,e as M,y as g,u as e,J as j,h as Fe,K as Z,at as Le,ap as Pe,_ as G,M as ue,z as Y,m as x,L as T,H as B,I as Re,l as _e,aL as Be,aM as _,aN as ee,a as V,F as Ne,R as Xe,aF as Oe,ab as W,T as Ze,A as Je,ad as re,aO as fe,t as le,B as Qe,p as Ye,aP as xe,aQ as me,a7 as ge,aR as et,b as Ue,ac as De,n as ve,aS as tt,aT as ye,aU as st,O as ot}from"./index-BeEkCUdZ.js";import{d as at,e as te,h as nt,j as Me,k as rt,l as lt,E as it}from"./el-button-Ex-qPnDM.js";import{t as ce,i as ut,a as ct,d as dt,b as pt,u as ft,E as mt}from"./aria-DJkAcb_K.js";import{a as he,w as gt,d as Ie,e as vt,c as ze,b as Ae,E as q,f as yt,z as ht,g as bt,i as kt,T as be,h as $t}from"./icon-CwRsUU3E.js";import{b as wt}from"./_baseClone-CyQiDM1o.js";var Ct=1,St=4;function ke(o){return wt(o,Ct|St)}const Tt=H({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:$([String,Object,Array])},offset:{type:$(Array),default:[0,0]},badgeClass:{type:String}}),Et=D({name:"ElBadge"}),Ft=D({...Et,props:Tt,setup(o,{expose:s}){const t=o,n=K("badge"),r=S(()=>t.isDot?"":Q(t.value)&&Q(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`),d=S(()=>{var u,w,c,y,k;return[{backgroundColor:t.color,marginRight:he(-((w=(u=t.offset)==null?void 0:u[0])!=null?w:0)),marginTop:he((y=(c=t.offset)==null?void 0:c[1])!=null?y:0)},(k=t.badgeStyle)!=null?k:{}]});return s({content:r}),(u,w)=>(v(),E("div",{class:g(e(n).b())},[L(u.$slots,"default"),U(Pe,{name:`${e(n).namespace.value}-zoom-in-center`,persisted:""},{default:F(()=>[Ee(M("sup",{class:g([e(n).e("content"),e(n).em("content",u.type),e(n).is("fixed",!!u.$slots.default),e(n).is("dot",u.isDot),e(n).is("hide-zero",!u.showZero&&t.value===0),u.badgeClass]),style:j(e(d))},[L(u.$slots,"content",{value:e(r)},()=>[Fe(Z(e(r)),1)])],6),[[Le,!u.hidden&&(e(r)||u.isDot||u.$slots.content)]])]),_:3},8,["name"])],2))}});var Lt=G(Ft,[["__file","badge.vue"]]);const Pt=ue(Lt),A={},Rt=H({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:o=>o>=0&&o<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:$(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:$([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:$(Function),default:o=>`${o}%`}}),_t=D({name:"ElProgress"}),Bt=D({..._t,props:Rt,setup(o){const s=o,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=K("progress"),r=S(()=>{const l={width:`${s.percentage}%`,animationDuration:`${s.duration}s`},C=P(s.percentage);return C.includes("gradient")?l.background=C:l.backgroundColor=C,l}),d=S(()=>(s.strokeWidth/s.width*100).toFixed(1)),u=S(()=>["circle","dashboard"].includes(s.type)?Number.parseInt(`${50-Number.parseFloat(d.value)/2}`,10):0),w=S(()=>{const l=u.value,C=s.type==="dashboard";return`
          M 50 50
          m 0 ${C?"":"-"}${l}
          a ${l} ${l} 0 1 1 0 ${C?"-":""}${l*2}
          a ${l} ${l} 0 1 1 0 ${C?"":"-"}${l*2}
          `}),c=S(()=>2*Math.PI*u.value),y=S(()=>s.type==="dashboard"?.75:1),k=S(()=>`${-1*c.value*(1-y.value)/2}px`),h=S(()=>({strokeDasharray:`${c.value*y.value}px, ${c.value}px`,strokeDashoffset:k.value})),I=S(()=>({strokeDasharray:`${c.value*y.value*(s.percentage/100)}px, ${c.value}px`,strokeDashoffset:k.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),i=S(()=>{let l;return s.color?l=P(s.percentage):l=t[s.status]||t.default,l}),p=S(()=>s.status==="warning"?gt:s.type==="line"?s.status==="success"?Ie:vt:s.status==="success"?ze:Ae),a=S(()=>s.type==="line"?12+s.strokeWidth*.4:s.width*.111111+2),m=S(()=>s.format(s.percentage));function f(l){const C=100/l.length;return l.map((O,b)=>x(O)?{color:O,percentage:(b+1)*C}:O).sort((O,b)=>O.percentage-b.percentage)}const P=l=>{var C;const{color:N}=s;if(Y(N))return N(l);if(x(N))return N;{const O=f(N);for(const b of O)if(b.percentage>l)return b.color;return(C=O[O.length-1])==null?void 0:C.color}};return(l,C)=>(v(),E("div",{class:g([e(n).b(),e(n).m(l.type),e(n).is(l.status),{[e(n).m("without-text")]:!l.showText,[e(n).m("text-inside")]:l.textInside}]),role:"progressbar","aria-valuenow":l.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[l.type==="line"?(v(),E("div",{key:0,class:g(e(n).b("bar"))},[M("div",{class:g(e(n).be("bar","outer")),style:j({height:`${l.strokeWidth}px`})},[M("div",{class:g([e(n).be("bar","inner"),{[e(n).bem("bar","inner","indeterminate")]:l.indeterminate},{[e(n).bem("bar","inner","striped")]:l.striped},{[e(n).bem("bar","inner","striped-flow")]:l.stripedFlow}]),style:j(e(r))},[(l.showText||l.$slots.default)&&l.textInside?(v(),E("div",{key:0,class:g(e(n).be("bar","innerText"))},[L(l.$slots,"default",{percentage:l.percentage},()=>[M("span",null,Z(e(m)),1)])],2)):T("v-if",!0)],6)],6)],2)):(v(),E("div",{key:1,class:g(e(n).b("circle")),style:j({height:`${l.width}px`,width:`${l.width}px`})},[(v(),E("svg",{viewBox:"0 0 100 100"},[M("path",{class:g(e(n).be("circle","track")),d:e(w),stroke:`var(${e(n).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":l.strokeLinecap,"stroke-width":e(d),fill:"none",style:j(e(h))},null,14,["d","stroke","stroke-linecap","stroke-width"]),M("path",{class:g(e(n).be("circle","path")),d:e(w),stroke:e(i),fill:"none",opacity:l.percentage?1:0,"stroke-linecap":l.strokeLinecap,"stroke-width":e(d),style:j(e(I))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(l.showText||l.$slots.default)&&!l.textInside?(v(),E("div",{key:2,class:g(e(n).e("text")),style:j({fontSize:`${e(a)}px`})},[L(l.$slots,"default",{percentage:l.percentage},()=>[l.status?(v(),B(e(q),{key:1},{default:F(()=>[(v(),B(Re(e(p))))]),_:1})):(v(),E("span",{key:0},Z(e(m)),1))])],6)):T("v-if",!0)],10,["aria-valuenow"]))}});var Nt=G(Bt,[["__file","progress.vue"]]);const Ot=ue(Nt),je=Symbol("uploadContextKey"),Ut="ElUpload";class Dt extends Error{constructor(s,t,n,r){super(s),this.name="UploadAjaxError",this.status=t,this.method=n,this.url=r}}function $e(o,s,t){let n;return t.response?n=`${t.response.error||t.response}`:t.responseText?n=`${t.responseText}`:n=`fail to ${s.method} ${o} ${t.status}`,new Dt(n,t.status,s.method,o)}function Mt(o){const s=o.responseText||o.response;if(!s)return s;try{return JSON.parse(s)}catch{return s}}const It=o=>{typeof XMLHttpRequest>"u"&&ce(Ut,"XMLHttpRequest is undefined");const s=new XMLHttpRequest,t=o.action;s.upload&&s.upload.addEventListener("progress",d=>{const u=d;u.percent=d.total>0?d.loaded/d.total*100:0,o.onProgress(u)});const n=new FormData;if(o.data)for(const[d,u]of Object.entries(o.data))_e(u)&&u.length?n.append(d,...u):n.append(d,u);n.append(o.filename,o.file,o.file.name),s.addEventListener("error",()=>{o.onError($e(t,o,s))}),s.addEventListener("load",()=>{if(s.status<200||s.status>=300)return o.onError($e(t,o,s));o.onSuccess(Mt(s))}),s.open(o.method,t,!0),o.withCredentials&&"withCredentials"in s&&(s.withCredentials=!0);const r=o.headers||{};if(r instanceof Headers)r.forEach((d,u)=>s.setRequestHeader(u,d));else for(const[d,u]of Object.entries(r))Be(u)||s.setRequestHeader(d,String(u));return s.send(n),s},qe=["text","picture","picture-card"];let zt=1;const ie=()=>Date.now()+zt++,He=H({action:{type:String,default:"#"},headers:{type:$(Object)},method:{type:String,default:"post"},data:{type:$([Object,Function,Promise]),default:()=>ee({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:$(Array),default:()=>ee([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:qe,default:"text"},httpRequest:{type:$(Function),default:It},disabled:Boolean,limit:Number}),At=H({...He,beforeUpload:{type:$(Function),default:_},beforeRemove:{type:$(Function)},onRemove:{type:$(Function),default:_},onChange:{type:$(Function),default:_},onPreview:{type:$(Function),default:_},onSuccess:{type:$(Function),default:_},onProgress:{type:$(Function),default:_},onError:{type:$(Function),default:_},onExceed:{type:$(Function),default:_},crossorigin:{type:$(String)}}),jt=H({files:{type:$(Array),default:()=>ee([])},disabled:{type:Boolean,default:!1},handlePreview:{type:$(Function),default:_},listType:{type:String,values:qe,default:"text"},crossorigin:{type:$(String)}}),qt={remove:o=>!!o},Ht=D({name:"ElUploadList"}),Kt=D({...Ht,props:jt,emits:qt,setup(o,{emit:s}){const t=o,{t:n}=at(),r=K("upload"),d=K("icon"),u=K("list"),w=te(),c=V(!1),y=S(()=>[r.b("list"),r.bm("list",t.listType),r.is("disabled",t.disabled)]),k=h=>{s("remove",h)};return(h,I)=>(v(),B(Ze,{tag:"ul",class:g(e(y)),name:e(u).b()},{default:F(()=>[(v(!0),E(Ne,null,Xe(h.files,(i,p)=>(v(),E("li",{key:i.uid||i.name,class:g([e(r).be("list","item"),e(r).is(i.status),{focusing:c.value}]),tabindex:"0",onKeydown:Oe(a=>!e(w)&&k(i),["delete"]),onFocus:a=>c.value=!0,onBlur:a=>c.value=!1,onClick:a=>c.value=!1},[L(h.$slots,"default",{file:i,index:p},()=>[h.listType==="picture"||i.status!=="uploading"&&h.listType==="picture-card"?(v(),E("img",{key:0,class:g(e(r).be("list","item-thumbnail")),src:i.url,crossorigin:h.crossorigin,alt:""},null,10,["src","crossorigin"])):T("v-if",!0),i.status==="uploading"||h.listType!=="picture-card"?(v(),E("div",{key:1,class:g(e(r).be("list","item-info"))},[M("a",{class:g(e(r).be("list","item-name")),onClick:W(a=>h.handlePreview(i),["prevent"])},[U(e(q),{class:g(e(d).m("document"))},{default:F(()=>[U(e(yt))]),_:1},8,["class"]),M("span",{class:g(e(r).be("list","item-file-name")),title:i.name},Z(i.name),11,["title"])],10,["onClick"]),i.status==="uploading"?(v(),B(e(Ot),{key:0,type:h.listType==="picture-card"?"circle":"line","stroke-width":h.listType==="picture-card"?6:2,percentage:Number(i.percentage),style:j(h.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):T("v-if",!0)],2)):T("v-if",!0),M("label",{class:g(e(r).be("list","item-status-label"))},[h.listType==="text"?(v(),B(e(q),{key:0,class:g([e(d).m("upload-success"),e(d).m("circle-check")])},{default:F(()=>[U(e(Ie))]),_:1},8,["class"])):["picture-card","picture"].includes(h.listType)?(v(),B(e(q),{key:1,class:g([e(d).m("upload-success"),e(d).m("check")])},{default:F(()=>[U(e(ze))]),_:1},8,["class"])):T("v-if",!0)],2),e(w)?T("v-if",!0):(v(),B(e(q),{key:2,class:g(e(d).m("close")),onClick:a=>k(i)},{default:F(()=>[U(e(Ae))]),_:2},1032,["class","onClick"])),T(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),T(" This is a bug which needs to be fixed "),T(" TODO: Fix the incorrect navigation interaction "),e(w)?T("v-if",!0):(v(),E("i",{key:3,class:g(e(d).m("close-tip"))},Z(e(n)("el.upload.deleteTip")),3)),h.listType==="picture-card"?(v(),E("span",{key:4,class:g(e(r).be("list","item-actions"))},[M("span",{class:g(e(r).be("list","item-preview")),onClick:a=>h.handlePreview(i)},[U(e(q),{class:g(e(d).m("zoom-in"))},{default:F(()=>[U(e(ht))]),_:1},8,["class"])],10,["onClick"]),e(w)?T("v-if",!0):(v(),E("span",{key:0,class:g(e(r).be("list","item-delete")),onClick:a=>k(i)},[U(e(q),{class:g(e(d).m("delete"))},{default:F(()=>[U(e(bt))]),_:1},8,["class"])],10,["onClick"]))],2)):T("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),L(h.$slots,"append")]),_:3},8,["class","name"]))}});var we=G(Kt,[["__file","upload-list.vue"]]);const Vt=H({disabled:{type:Boolean,default:!1}}),Wt={file:o=>_e(o)},Ke="ElUploadDrag",Gt=D({name:Ke}),Xt=D({...Gt,props:Vt,emits:Wt,setup(o,{emit:s}){Je(je)||ce(Ke,"usage: <el-upload><el-upload-dragger /></el-upload>");const n=K("upload"),r=V(!1),d=te(),u=c=>{if(d.value)return;r.value=!1,c.stopPropagation();const y=Array.from(c.dataTransfer.files);s("file",y)},w=()=>{d.value||(r.value=!0)};return(c,y)=>(v(),E("div",{class:g([e(n).b("dragger"),e(n).is("dragover",r.value)]),onDrop:W(u,["prevent"]),onDragover:W(w,["prevent"]),onDragleave:W(k=>r.value=!1,["prevent"])},[L(c.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Zt=G(Xt,[["__file","upload-dragger.vue"]]);const Jt=H({...He,beforeUpload:{type:$(Function),default:_},onRemove:{type:$(Function),default:_},onStart:{type:$(Function),default:_},onSuccess:{type:$(Function),default:_},onProgress:{type:$(Function),default:_},onError:{type:$(Function),default:_},onExceed:{type:$(Function),default:_}}),Qt=D({name:"ElUploadContent",inheritAttrs:!1}),Yt=D({...Qt,props:Jt,setup(o,{expose:s}){const t=o,n=K("upload"),r=te(),d=re({}),u=re(),w=a=>{if(a.length===0)return;const{autoUpload:m,limit:f,fileList:P,multiple:l,onStart:C,onExceed:N}=t;if(f&&P.length+a.length>f){N(a,P);return}l||(a=a.slice(0,1));for(const O of a){const b=O;b.uid=ie(),C(b),m&&c(b)}},c=async a=>{if(u.value.value="",!t.beforeUpload)return k(a);let m,f={};try{const l=t.data,C=t.beforeUpload(a);f=fe(t.data)?ke(t.data):t.data,m=await C,fe(t.data)&&ut(l,f)&&(f=ke(t.data))}catch{m=!1}if(m===!1){t.onRemove(a);return}let P=a;m instanceof Blob&&(m instanceof File?P=m:P=new File([m],a.name,{type:a.type})),k(Object.assign(P,{uid:a.uid}),f)},y=async(a,m)=>Y(a)?a(m):a,k=async(a,m)=>{const{headers:f,data:P,method:l,withCredentials:C,name:N,action:O,onProgress:b,onSuccess:de,onError:pe,httpRequest:Ge}=t;try{m=await y(m??P,a)}catch{t.onRemove(a);return}const{uid:se}=a,oe={headers:f||{},withCredentials:C,file:a,data:m,method:l,filename:N,action:O,onProgress:X=>{b(X,a)},onSuccess:X=>{de(X,a),delete d.value[se]},onError:X=>{pe(X,a),delete d.value[se]}},ae=Ge(oe);d.value[se]=ae,ae instanceof Promise&&ae.then(oe.onSuccess,oe.onError)},h=a=>{const m=a.target.files;m&&w(Array.from(m))},I=()=>{r.value||(u.value.value="",u.value.click())},i=()=>{I()};return s({abort:a=>{nt(d.value).filter(a?([f])=>String(a.uid)===f:()=>!0).forEach(([f,P])=>{P instanceof XMLHttpRequest&&P.abort(),delete d.value[f]})},upload:c}),(a,m)=>(v(),E("div",{class:g([e(n).b(),e(n).m(a.listType),e(n).is("drag",a.drag),e(n).is("disabled",e(r))]),tabindex:e(r)?"-1":"0",onClick:I,onKeydown:Oe(W(i,["self"]),["enter","space"])},[a.drag?(v(),B(Zt,{key:0,disabled:e(r),onFile:w},{default:F(()=>[L(a.$slots,"default")]),_:3},8,["disabled"])):L(a.$slots,"default",{key:1}),M("input",{ref_key:"inputRef",ref:u,class:g(e(n).e("input")),name:a.name,disabled:e(r),multiple:a.multiple,accept:a.accept,type:"file",onChange:h,onClick:W(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var Ce=G(Yt,[["__file","upload-content.vue"]]);const Se="ElUpload",Te=o=>{var s;(s=o.url)!=null&&s.startsWith("blob:")&&URL.revokeObjectURL(o.url)},xt=(o,s)=>{const t=ct(o,"fileList",void 0,{passive:!0}),n=i=>t.value.find(p=>p.uid===i.uid);function r(i){var p;(p=s.value)==null||p.abort(i)}function d(i=["ready","uploading","success","fail"]){t.value=t.value.filter(p=>!i.includes(p.status))}function u(i){t.value=t.value.filter(p=>p!==i)}const w=(i,p)=>{const a=n(p);a&&(console.error(i),a.status="fail",u(a),o.onError(i,a,t.value),o.onChange(a,t.value))},c=(i,p)=>{const a=n(p);a&&(o.onProgress(i,a,t.value),a.status="uploading",a.percentage=Math.round(i.percent))},y=(i,p)=>{const a=n(p);a&&(a.status="success",a.response=i,o.onSuccess(i,a,t.value),o.onChange(a,t.value))},k=i=>{Be(i.uid)&&(i.uid=ie());const p={name:i.name,percentage:0,status:"ready",size:i.size,raw:i,uid:i.uid};if(o.listType==="picture-card"||o.listType==="picture")try{p.url=URL.createObjectURL(i)}catch(a){dt(Se,a.message),o.onError(a,p,t.value)}t.value=[...t.value,p],o.onChange(p,t.value)},h=async i=>{const p=i instanceof File?n(i):i;p||ce(Se,"file to be removed not found");const a=m=>{r(m),u(m),o.onRemove(m,t.value),Te(m)};o.beforeRemove?await o.beforeRemove(p,t.value)!==!1&&a(p):a(p)};function I(){t.value.filter(({status:i})=>i==="ready").forEach(({raw:i})=>{var p;return i&&((p=s.value)==null?void 0:p.upload(i))})}return le(()=>o.listType,i=>{i!=="picture-card"&&i!=="picture"||(t.value=t.value.map(p=>{const{raw:a,url:m}=p;if(!m&&a)try{p.url=URL.createObjectURL(a)}catch(f){o.onError(f,p,t.value)}return p}))}),le(t,i=>{for(const p of i)p.uid||(p.uid=ie()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:t,abort:r,clearFiles:d,handleError:w,handleProgress:c,handleStart:k,handleSuccess:y,handleRemove:h,submit:I,revokeFileObjectURL:Te}},es=D({name:"ElUpload"}),ts=D({...es,props:At,setup(o,{expose:s}){const t=o,n=te(),r=re(),{abort:d,submit:u,clearFiles:w,uploadFiles:c,handleStart:y,handleError:k,handleRemove:h,handleSuccess:I,handleProgress:i,revokeFileObjectURL:p}=xt(t,r),a=S(()=>t.listType==="picture-card"),m=S(()=>({...t,fileList:c.value,onStart:y,onProgress:i,onSuccess:I,onError:k,onRemove:h}));return Qe(()=>{c.value.forEach(p)}),Ye(je,{accept:xe(t,"accept")}),s({abort:d,submit:u,clearFiles:w,handleStart:y,handleRemove:h}),(f,P)=>(v(),E("div",null,[e(a)&&f.showFileList?(v(),B(we,{key:0,disabled:e(n),"list-type":f.listType,files:e(c),crossorigin:f.crossorigin,"handle-preview":f.onPreview,onRemove:e(h)},me({append:F(()=>[U(Ce,ge({ref_key:"uploadRef",ref:r},e(m)),{default:F(()=>[f.$slots.trigger?L(f.$slots,"trigger",{key:0}):T("v-if",!0),!f.$slots.trigger&&f.$slots.default?L(f.$slots,"default",{key:1}):T("v-if",!0)]),_:3},16)]),_:2},[f.$slots.file?{name:"default",fn:F(({file:l,index:C})=>[L(f.$slots,"file",{file:l,index:C})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):T("v-if",!0),!e(a)||e(a)&&!f.showFileList?(v(),B(Ce,ge({key:1,ref_key:"uploadRef",ref:r},e(m)),{default:F(()=>[f.$slots.trigger?L(f.$slots,"trigger",{key:0}):T("v-if",!0),!f.$slots.trigger&&f.$slots.default?L(f.$slots,"default",{key:1}):T("v-if",!0)]),_:3},16)):T("v-if",!0),f.$slots.trigger?L(f.$slots,"default",{key:2}):T("v-if",!0),L(f.$slots,"tip"),!e(a)&&f.showFileList?(v(),B(we,{key:3,disabled:e(n),"list-type":f.listType,files:e(c),crossorigin:f.crossorigin,"handle-preview":f.onPreview,onRemove:e(h)},me({_:2},[f.$slots.file?{name:"default",fn:F(({file:l,index:C})=>[L(f.$slots,"file",{file:l,index:C})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):T("v-if",!0)]))}});var ss=G(ts,[["__file","upload.vue"]]);const os=ue(ss),Ve=["success","info","warning","error"],R=ee({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Me?document.body:void 0}),as=H({customClass:{type:String,default:R.customClass},center:{type:Boolean,default:R.center},dangerouslyUseHTMLString:{type:Boolean,default:R.dangerouslyUseHTMLString},duration:{type:Number,default:R.duration},icon:{type:kt,default:R.icon},id:{type:String,default:R.id},message:{type:$([String,Object,Function]),default:R.message},onClose:{type:$(Function),default:R.onClose},showClose:{type:Boolean,default:R.showClose},type:{type:String,values:Ve,default:R.type},plain:{type:Boolean,default:R.plain},offset:{type:Number,default:R.offset},zIndex:{type:Number,default:R.zIndex},grouping:{type:Boolean,default:R.grouping},repeatNum:{type:Number,default:R.repeatNum}}),ns={destroy:()=>!0},z=et([]),rs=o=>{const s=z.findIndex(r=>r.id===o),t=z[s];let n;return s>0&&(n=z[s-1]),{current:t,prev:n}},ls=o=>{const{prev:s}=rs(o);return s?s.vm.exposed.bottom.value:0},is=(o,s)=>z.findIndex(n=>n.id===o)>0?16:s,us=D({name:"ElMessage"}),cs=D({...us,props:as,emits:ns,setup(o,{expose:s}){const t=o,{Close:n}=$t,{ns:r,zIndex:d}=rt("message"),{currentZIndex:u,nextZIndex:w}=d,c=V(),y=V(!1),k=V(0);let h;const I=S(()=>t.type?t.type==="error"?"danger":t.type:"info"),i=S(()=>{const b=t.type;return{[r.bm("icon",b)]:b&&be[b]}}),p=S(()=>t.icon||be[t.type]||""),a=S(()=>ls(t.id)),m=S(()=>is(t.id,t.offset)+a.value),f=S(()=>k.value+m.value),P=S(()=>({top:`${m.value}px`,zIndex:u.value}));function l(){t.duration!==0&&({stop:h}=lt(()=>{N()},t.duration))}function C(){h==null||h()}function N(){y.value=!1}function O({code:b}){b===mt.esc&&N()}return Ue(()=>{l(),w(),y.value=!0}),le(()=>t.repeatNum,()=>{C(),l()}),pt(document,"keydown",O),ft(c,()=>{k.value=c.value.getBoundingClientRect().height}),s({visible:y,bottom:f,close:N}),(b,de)=>(v(),B(Pe,{name:e(r).b("fade"),onBeforeLeave:b.onClose,onAfterLeave:pe=>b.$emit("destroy"),persisted:""},{default:F(()=>[Ee(M("div",{id:b.id,ref_key:"messageRef",ref:c,class:g([e(r).b(),{[e(r).m(b.type)]:b.type},e(r).is("center",b.center),e(r).is("closable",b.showClose),e(r).is("plain",b.plain),b.customClass]),style:j(e(P)),role:"alert",onMouseenter:C,onMouseleave:l},[b.repeatNum>1?(v(),B(e(Pt),{key:0,value:b.repeatNum,type:e(I),class:g(e(r).e("badge"))},null,8,["value","type","class"])):T("v-if",!0),e(p)?(v(),B(e(q),{key:1,class:g([e(r).e("icon"),e(i)])},{default:F(()=>[(v(),B(Re(e(p))))]),_:1},8,["class"])):T("v-if",!0),L(b.$slots,"default",{},()=>[b.dangerouslyUseHTMLString?(v(),E(Ne,{key:1},[T(" Caution here, message could've been compromised, never use user's input as message "),M("p",{class:g(e(r).e("content")),innerHTML:b.message},null,10,["innerHTML"])],2112)):(v(),E("p",{key:0,class:g(e(r).e("content"))},Z(b.message),3))]),b.showClose?(v(),B(e(q),{key:2,class:g(e(r).e("closeBtn")),onClick:W(N,["stop"])},{default:F(()=>[U(e(n))]),_:1},8,["class","onClick"])):T("v-if",!0)],46,["id"]),[[Le,y.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var ds=G(cs,[["__file","message.vue"]]);let ps=1;const We=o=>{const s=!o||x(o)||De(o)||Y(o)?{message:o}:o,t={...R,...s};if(!t.appendTo)t.appendTo=document.body;else if(x(t.appendTo)){let n=document.querySelector(t.appendTo);tt(n)||(n=document.body),t.appendTo=n}return ve(A.grouping)&&!t.grouping&&(t.grouping=A.grouping),Q(A.duration)&&t.duration===3e3&&(t.duration=A.duration),Q(A.offset)&&t.offset===16&&(t.offset=A.offset),ve(A.showClose)&&!t.showClose&&(t.showClose=A.showClose),t},fs=o=>{const s=z.indexOf(o);if(s===-1)return;z.splice(s,1);const{handler:t}=o;t.close()},ms=({appendTo:o,...s},t)=>{const n=`message_${ps++}`,r=s.onClose,d=document.createElement("div"),u={...s,id:n,onClose:()=>{r==null||r(),fs(k)},onDestroy:()=>{ye(null,d)}},w=U(ds,u,Y(u.message)||De(u.message)?{default:Y(u.message)?u.message:()=>u.message}:null);w.appContext=t||J._context,ye(w,d),o.appendChild(d.firstElementChild);const c=w.component,k={id:n,vnode:w,vm:c,handler:{close:()=>{c.exposed.visible.value=!1}},props:w.component.props};return k},J=(o={},s)=>{if(!Me)return{close:()=>{}};const t=We(o);if(t.grouping&&z.length){const r=z.find(({vnode:d})=>{var u;return((u=d.props)==null?void 0:u.message)===t.message});if(r)return r.props.repeatNum+=1,r.props.type=t.type,r.handler}if(Q(A.max)&&z.length>=A.max)return{close:()=>{}};const n=ms(t,s);return z.push(n),n.handler};Ve.forEach(o=>{J[o]=(s={},t)=>{const n=We(s);return J({...n,type:o},t)}});function gs(o){for(const s of z)(!o||o===s.props.type)&&s.handler.close()}J.closeAll=gs;J._context=null;const ne=st(J,"$message"),vs={class:"container"},ys={__name:"Test",setup(o){const s=V(null);Ue(()=>{t()});const t=async()=>{try{const c=await fetch("http://192.168.1.100:5244/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin",password:"admin"})});if(!c.ok)throw new Error("Network response was not ok");const y=await c.json();n.value.Authorization=y.data.token,console.log(n.value)}catch(c){console.error("Failed to fetch token:",c)}},n=V({Authorization:""}),r=(c,y)=>{ne.warning(`当前限制选择 3 个文件，本次选择了 ${c.length} 个文件，共选择了 ${c.length+y.length} 个文件`)},d=(c,y)=>{s.value.clearFiles(),console.log(c),ne({message:"上传成功",type:"success"})},u=(c,y)=>{s.value.clearFiles(),console.log(c),ne.error("上传失败")},w=async c=>{const y=new FormData;y.append("file",c.file);try{const k=await fetch("http://192.168.1.100:5244/api/fs/form",{method:"PUT",headers:{...n.value,"File-Path":encodeURIComponent("/"+c.file.name)},body:y});k.ok||console.log("上传失败",k);const h=await k.json();c.onSuccess(h,c.file)}catch(k){console.error("Failed to upload file:",k),c.onError(k,c.file)}};return(c,y)=>{const k=it,h=os;return v(),E("div",vs,[U(h,{ref_key:"upload",ref:s,class:"upload-demo",headers:n.value,limit:3,"on-exceed":r,multiple:"","auto-upload":!0,"on-success":d,"on-error":u,"http-request":w},{trigger:F(()=>[U(k,{type:"primary"},{default:F(()=>y[0]||(y[0]=[Fe("上传")])),_:1})]),_:1},8,["headers"])])}}},Cs=ot(ys,[["__scopeId","data-v-4ed391c2"]]);export{Cs as default};
