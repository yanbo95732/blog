import{l as G,ac as K,ad as Ce,j as de,ae as ve,q as M,s as fe,t as Y,p as we,g as h,d as k,x as O,y as m,u as o,_ as he,af as me,a as I,A as Ee,b as ge,B as ke,c as S,r as Ne,L as A,e as B,J as le,H as R,w as T,I as Pe,f as N,K as D,h as q,M as Re,N as Ie,ag as Ve,V as Be,ah as Te,ai as $e,$ as ne,aj as re,a0 as xe,Z as Me,ak as ze,a9 as ie,al as ue,am as Ae,X as He,a1 as Oe,Q as De,R as ce,F as pe,P as Fe}from"./index-CiKZm7CY.js";import{u as Ue}from"./use-touch-K7zSc3pH.js";import{C as Se}from"./event-HEVJa2N9.js";import{i as je,E as W,c as Je,b as Le}from"./icon-5QgJbtsu.js";const F=a=>{const u=G(a)?a:[a],s=[];return u.forEach(e=>{var p;G(e)?s.push(...F(e)):K(e)&&((p=e.component)!=null&&p.subTree)?s.push(e,...F(e.component.subTree)):K(e)&&G(e.children)?s.push(...F(e.children)):s.push(e)}),s},Xe=(a,u,s)=>F(a.subTree).filter(c=>{var l;return K(c)&&((l=c.type)==null?void 0:l.name)===u&&!!c.component}).map(c=>c.component.uid).map(c=>s[c]).filter(c=>!!c),Ge=(a,u)=>{const s={},e=Ce([]);return{children:e,addChild:l=>{s[l.uid]=l,e.value=Xe(a,u,s)},removeChild:l=>{delete s[l],e.value=e.value.filter(i=>i.uid!==l)}}},We=de({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),Ke={[Se]:(a,u)=>[a,u].every(ve)},Ye=M({name:"ElSteps"}),qe=M({...Ye,props:We,emits:Ke,setup(a,{emit:u}){const s=a,e=fe("steps"),{children:p,addChild:c,removeChild:l}=Ge(me(),"ElStep");return Y(p,()=>{p.value.forEach((i,t)=>{i.setIndex(t)})}),we("ElSteps",{props:s,steps:p,addStep:c,removeStep:l}),Y(()=>s.active,(i,t)=>{u(Se,i,t)}),(i,t)=>(h(),k("div",{class:m([o(e).b(),o(e).m(i.simple?"simple":i.direction)])},[O(i.$slots,"default")],2))}});var Qe=he(qe,[["__file","steps.vue"]]);const Ze=de({title:{type:String,default:""},icon:{type:je},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),es=M({name:"ElStep"}),ss=M({...es,props:Ze,setup(a){const u=a,s=fe("step"),e=I(-1),p=I({}),c=I(""),l=Ee("ElSteps"),i=me();ge(()=>{Y([()=>l.props.active,()=>l.props.processStatus,()=>l.props.finishStatus],([n])=>{r(n)},{immediate:!0})}),ke(()=>{l.removeStep(v.uid)});const t=S(()=>u.status||c.value),f=S(()=>{const n=l.steps.value[e.value-1];return n?n.currentStatus:"wait"}),y=S(()=>l.props.alignCenter),w=S(()=>l.props.direction==="vertical"),g=S(()=>l.props.simple),E=S(()=>l.steps.value.length),_=S(()=>{var n;return((n=l.steps.value[E.value-1])==null?void 0:n.uid)===(i==null?void 0:i.uid)}),b=S(()=>g.value?"":l.props.space),P=S(()=>[s.b(),s.is(g.value?"simple":l.props.direction),s.is("flex",_.value&&!b.value&&!y.value),s.is("center",y.value&&!w.value&&!g.value)]),U=S(()=>{const n={flexBasis:ve(b.value)?`${b.value}px`:b.value?b.value:`${100/(E.value-(y.value?0:1))}%`};return w.value||_.value&&(n.maxWidth=`${100/E.value}%`),n}),j=n=>{e.value=n},d=n=>{const C=n==="wait",V={transitionDelay:`${C?"-":""}${150*e.value}ms`},$=n===l.props.processStatus||C?0:100;V.borderWidth=$&&!g.value?"1px":0,V[l.props.direction==="vertical"?"height":"width"]=`${$}%`,p.value=V},r=n=>{n>e.value?c.value=l.props.finishStatus:n===e.value&&f.value!=="error"?c.value=l.props.processStatus:c.value="wait";const C=l.steps.value[e.value-1];C&&C.calcProgress(c.value)},v=Ne({uid:i.uid,currentStatus:t,setIndex:j,calcProgress:d});return l.addStep(v),(n,C)=>(h(),k("div",{style:le(o(U)),class:m(o(P))},[A(" icon & line "),B("div",{class:m([o(s).e("head"),o(s).is(o(t))])},[o(g)?A("v-if",!0):(h(),k("div",{key:0,class:m(o(s).e("line"))},[B("i",{class:m(o(s).e("line-inner")),style:le(p.value)},null,6)],2)),B("div",{class:m([o(s).e("icon"),o(s).is(n.icon||n.$slots.icon?"icon":"text")])},[O(n.$slots,"icon",{},()=>[n.icon?(h(),R(o(W),{key:0,class:m(o(s).e("icon-inner"))},{default:T(()=>[(h(),R(Pe(n.icon)))]),_:1},8,["class"])):o(t)==="success"?(h(),R(o(W),{key:1,class:m([o(s).e("icon-inner"),o(s).is("status")])},{default:T(()=>[N(o(Je))]),_:1},8,["class"])):o(t)==="error"?(h(),R(o(W),{key:2,class:m([o(s).e("icon-inner"),o(s).is("status")])},{default:T(()=>[N(o(Le))]),_:1},8,["class"])):o(g)?A("v-if",!0):(h(),k("div",{key:3,class:m(o(s).e("icon-inner"))},D(e.value+1),3))])],2)],2),A(" title & description "),B("div",{class:m(o(s).e("main"))},[B("div",{class:m([o(s).e("title"),o(s).is(o(t))])},[O(n.$slots,"title",{},()=>[q(D(n.title),1)])],2),o(g)?(h(),k("div",{key:0,class:m(o(s).e("arrow"))},null,2)):(h(),k("div",{key:1,class:m([o(s).e("description"),o(s).is(o(t))])},[O(n.$slots,"description",{},()=>[q(D(n.description),1)])],2))],2)],6))}});var _e=he(ss,[["__file","item.vue"]]);const ts=Re(Qe,{Step:_e}),as=Ie(_e);function os(){const a=I([]),u=[];return Ve(()=>{a.value=[]}),[a,e=>(u[e]||(u[e]=p=>{a.value[e]=p}),u[e])]}const[ls,H]=Be("rate");function ns(a,u,s,e){return a>=u?{status:"full",value:1}:a+.5>=u&&s&&!e?{status:"half",value:.5}:a+1>=u&&s&&e?{status:"half",value:Math.round((a-u+1)*1e10)/1e10}:{status:"void",value:0}}const rs={size:ne,icon:re("star"),color:String,count:xe(5),gutter:ne,clearable:Boolean,readonly:Boolean,disabled:Boolean,voidIcon:re("star-o"),allowHalf:Boolean,voidColor:String,touchable:Me,iconPrefix:String,modelValue:ze(0),disabledColor:String};var is=M({name:ls,props:rs,emits:["change","update:modelValue"],setup(a,{emit:u}){const s=Ue(),[e,p]=os(),c=I(),l=S(()=>a.readonly||a.disabled),i=S(()=>l.value||!a.touchable),t=S(()=>Array(+a.count).fill("").map((d,r)=>ns(a.modelValue,r+1,a.allowHalf,a.readonly)));let f,y,w=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;const E=()=>{y=ue(c);const d=e.value.map(ue);f=[],d.forEach((r,v)=>{w=Math.min(r.top,w),g=Math.max(r.top,g),a.allowHalf?f.push({score:v+.5,left:r.left,top:r.top,height:r.height},{score:v+1,left:r.left+r.width/2,top:r.top,height:r.height}):f.push({score:v+1,left:r.left,top:r.top,height:r.height})})},_=(d,r)=>{for(let v=f.length-1;v>0;v--)if(r>=y.top&&r<=y.bottom){if(d>f[v].left&&r>=f[v].top&&r<=f[v].top+f[v].height)return f[v].score}else{const n=r<y.top?w:g;if(d>f[v].left&&f[v].top===n)return f[v].score}return a.allowHalf?.5:1},b=d=>{l.value||d===a.modelValue||(u("update:modelValue",d),u("change",d))},P=d=>{i.value||(s.start(d),E())},U=d=>{if(!i.value&&(s.move(d),s.isHorizontal()&&!s.isTap.value)){const{clientX:r,clientY:v}=d.touches[0];Ae(d),b(_(r,v))}},j=(d,r)=>{const{icon:v,size:n,color:C,count:V,gutter:$,voidIcon:Q,disabled:x,voidColor:Z,allowHalf:ee,iconPrefix:se,disabledColor:te}=a,J=r+1,L=d.status==="full",z=d.status==="void",ye=ee&&d.value>0&&d.value<1;let ae;$&&J!==+V&&(ae={paddingRight:He($)});const be=oe=>{E();let X=ee?_(oe.clientX,oe.clientY):J;a.clearable&&s.isTap.value&&X===a.modelValue&&(X=0),b(X)};return N("div",{key:r,ref:p(r),role:"radio",style:ae,class:H("item"),tabindex:x?void 0:0,"aria-setsize":V,"aria-posinset":J,"aria-checked":!z,onClick:be},[N(ie,{size:n,name:L?v:Q,class:H("icon",{disabled:x,full:L}),color:x?te:L?C:Z,classPrefix:se},null),ye&&N(ie,{size:n,style:{width:d.value+"em"},name:z?Q:v,class:H("icon",["half",{disabled:x,full:!z}]),color:x?te:z?Z:C,classPrefix:se},null)])};return Te(()=>a.modelValue),$e("touchmove",U,{target:c}),()=>N("div",{ref:c,role:"radiogroup",class:H({readonly:a.readonly,disabled:a.disabled}),tabindex:a.disabled?void 0:0,"aria-disabled":a.disabled,"aria-readonly":a.readonly,onTouchstartPassive:P},[t.value.map(j)])}});const us=Oe(is),cs={style:{"text-align":"left"}},hs={__name:"Mhxy",setup(a){const u=I(10),s=["妖女？佳人？","斩妖除魔","怒发冲冠","神鹿有难","人心不古","魔源现身"],e=["离开河边","告知有危险","一起救人","阻止九色鹿救人","继续说服","离开森林，寻找妖魔的轨迹","离开森林，前往皇宫","杀死调达","暗中调查","立刻擒住女子","和平解决","刺杀妖魔女子","调达会揭榜","调达不会揭榜"],p=I([]);ge(()=>{let i=localStorage.getItem("mh_datas");console.log(i),i?p.value=JSON.parse(i):c();const t=window.navigator.userAgent;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)&&(u.value=20),console.log(p.value)});const c=()=>{for(let i=0;i<6;i++){let t=[];switch(i){case 0:t.push(e[0]),t.push(e[2]),t.push(e[5]),t.push(e[7]),t.push(e[6]),t.push(e[9]);break;case 1:t.push(e[0]),t.push(e[2]),t.push(e[5]),t.push(e[7]),t.push(e[6]),t.push(e[8]);break;case 2:t.push(e[1]),t.push(e[3]),t.push(e[6]),t.push(e[11]);break;case 3:t.push(e[0]),t.push(e[3]),t.push(e[6]),t.push(e[10]);break;case 4:t.push(e[1]),t.push(e[2]),t.push(e[4]),t.push(e[6]),t.push(e[12]);break;case 5:t.push(e[0]),t.push(e[2]),t.push(e[4]),t.push(e[6]),t.push(e[13]);break}let f={title:s[i],items:t,rate:0,active:0};p.value.push(f),localStorage.setItem("mh_datas",JSON.stringify(p.value))}},l=i=>{localStorage.setItem("mh_datas",JSON.stringify(p.value))};return(i,t)=>{const f=us,y=as,w=ts,g=Fe,E=De;return h(),R(E,{style:{"margin-top":"20px"}},{default:T(()=>[(h(!0),k(pe,null,ce(p.value,(_,b)=>(h(),R(g,{span:u.value,offset:1},{default:T(()=>[B("div",cs,[N(f,{modelValue:_.rate,"onUpdate:modelValue":P=>_.rate=P,count:2,clearable:"",style:{"margin-right":"10px"},onChange:l},null,8,["modelValue","onUpdate:modelValue"]),q(" "+D(_.title),1)]),N(w,{style:{"max-width":"600px"},active:_.active,"finish-status":"success","align-center":""},{default:T(()=>[(h(!0),k(pe,null,ce(_.items,P=>(h(),R(y,{title:P},null,8,["title"]))),256))]),_:2},1032,["active"])]),_:2},1032,["span"]))),256))]),_:1})}}};export{hs as default};
